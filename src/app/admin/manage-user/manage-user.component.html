<div class="container-xxl position-relative bg-white d-flex p-0">

  <app-sidebar></app-sidebar>
  <div class="content">
    <app-admin-navbar></app-admin-navbar>
      <div class="container-fluid pt-4 px-4">
          <div class="row vh-100 bg-light rounded  justify-content-center mx-0">
              <div class="col-md-12">
                <div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
                data-sidebar-position="fixed" data-header-position="fixed">
                  <!--  Main wrapper -->
                <div class="body-wrapper">
                <div class="card w-80" style="margin-top: 20px !important; margin-left: 20px; margin-right:20px;">
                    <div class="card-body p-4">
                      <h5 class="card-title fw-semibold mb-4">All Users</h5>
                      <!-- <button (click)="openCreateDialog()" class="btn btn-primary m-2">Create New</button> -->
                      <div class="table-responsive">
                        <table class="table text-nowrap mb-0 align-middle">
                          <thead class="text-dark fs-4">
                            <tr>
                              <th class="border-bottom-0">
                                <h6 class="fw-semibold mb-0">User Name</h6>
                              </th>
                              <th class="border-bottom-0">
                                <h6 class="fw-semibold mb-0">Password</h6>
                              </th>
                              <th class="border-bottom-0">
                                <h6 class="fw-semibold mb-0">First Name</h6>
                              </th>
                              <th class="border-bottom-0">
                                <h6 class="fw-semibold mb-0">Last Name</h6>
                              </th>
                              <th class="border-bottom-0">
                                <h6 class="fw-semibold mb-0">Image Name</h6>
                              </th>
                              <th class="border-bottom-0">
                                <h6 class="fw-semibold mb-0">Email</h6>
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let user of appservice.users">
                              <td>{{user.user_Name}}</td>
                              <td>{{user.password}}</td>
                              <td>{{user.first_Name}}</td>
                              <td>{{user.last_Name}}</td>
                              <td><img src="../../../assets/Images/{{user.image_Name}}" width="100px" style="border-radius: 20px;"></td>
                              <td>{{user.email}}</td>
                              <!-- <td>
                                <button class="btn btn-primary m-1" (click)="openUpdateDailog(user)">Update</button>
                                <button class="btn btn-danger m-1" (click)="openDeleteDialog(user.user_Id)">Delete</button>
                              </td> -->
                            </tr>       
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
                <ng-template #callDeleteDialog>
                <div style="padding: 15px;">
                  <p>Are you sure you want to delete this item?</p>
                  <button class="btn btn-primary m-1" mat-dialog-close="yes">Yes</button>
                  <button class="btn btn-danger m-1" mat-dialog-close="no">No</button>
                </div>
                </ng-template>
                  </div>
          </div>
      </div>
      <app-admin-footer></app-admin-footer>
  </div>
  
  </div>

<ng-template #callUpdateDialog>
    
<h2 mat-dialog-title>Update User</h2>
<mat-dialog-content class="mat-typography">
  <form class="example-form" [formGroup]="updateForm">
      <mat-form-field class="example-full-width">
        <mat-label>User Name</mat-label>
        <input type="text" matInput formControlName="user_Name" [(ngModel)]="previousUserData.user_Name" >
      </mat-form-field>
      <mat-form-field class="example-full-width">
        <mat-label>Password</mat-label>
        <input type="password" matInput formControlName="password" [(ngModel)]="previousUserData.password">
      </mat-form-field>
      <mat-form-field class="example-full-width">
        <mat-label>First Name</mat-label>
        <input type="text" matInput formControlName="first_Name" [(ngModel)]="previousUserData.first_Name">
      </mat-form-field>
      <mat-form-field class="example-full-width">
        <mat-label>Last Name</mat-label>
        <input type="text" matInput formControlName="last_Name" [(ngModel)]="previousUserData.last_Name">
      </mat-form-field>
      <!--we should test this-->
      <div class="example-full-width">
        <label>Image Name</label>
        <input type="file" accept="image/*" #file formControlName="image_Name" (change)="UploadFile(file.files)" >
      </div>
      <mat-form-field class="example-full-width">
        <mat-label>Email</mat-label>
        <input type="email" matInput formControlName="email" [(ngModel)]="previousUserData.email">
      </mat-form-field>
    </form>    
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-button mat-dialog-close>Cancel</button>
  <button mat-button [mat-dialog-close]="true" cdkFocusInitial (click)="update()">Update</button>
</mat-dialog-actions>
    </ng-template>